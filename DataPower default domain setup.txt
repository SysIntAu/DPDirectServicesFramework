DataPower default domain setup.
1. Log in to WebGUI as admin
2. Accept license
3. Log in to WebGUI as admin
4. Update RBM (Administration…  Access… RBM Settings)
a. Open Authentication
i. Authentication method: Local user
b. Open Credential-mapping
i. Local user group
c. Password policy
i. Minimum length: 10
ii. Require mixed case (checked)
iii. Require non-alphanumeric (checked)
iv. Require number (checked)
v. Disallow user name substring (checked)
vi. Enabled aging (checked)
vii. Maximum age (93)
viii. Control reuse (checked)
ix. Password hash algorithm (sha256crypt)
d. Account policy
i. Restrict admin to serial (not checked)
ii. Maximum failed logins: 5
iii. Locout duration: 5
iv. Enforce RBM on CLI (checked)
v. CLI idle timeout: 600
e. Apply 
f. Save Configuration
5. Create users (Administration… Access… User Account)
a. Click New…
b. Set user access level to privileged.
c. Set password and force password change on login
d. Apply
6. Log out of ‘admin’
7. Log in as personal privileged account
8. Set appliance identity (Administration… Device… System Settings)
a. Enter a comment (e.g. Non-Prod Verizon DMZ located.)
b. Contact: emailaddr
c. Appliance name: vm name (e.g. org-nprd-dp01)
d. Location: vCenter (give vCentre identity)
e. Apply
9. Set time zone (Administration… Device… Time Settings)
a. Enable administrative state (checked)
b. Local time zone EST/EDT (Australia Eastern Time)
c. Apply
10. Initialize RAID array (if needed) (Administration… Storage Devices… RAID Array)
a. Click raid0
b. Clear check box for Enable administrative state
c. Select Actions… Initialise file system
d. Clear checkbox for Enable for B2B Storage
e. Click Initialize file system
f. Confirm
g. Enable administrative state (checked)
h. Directory: ondisk
i. Apply
11. Reboot system (if needed) (Administration… Main… System Control)
a. Under Shutdown
i. Mode:  Reboot system
ii. Delay: 1
iii. Shutdown
iv. Confirm
12. Create error-reports directory (Administration… Main… File Management)
a. Open ‘local:’
b. Beside ‘ondisk’, click Actions… Create Subdirectory
c. Enter Directory Name ‘error-reports’
d. Confirm Create
e. Continue
13. Set up first failure data capture (Administration… Device… Failure Notification)
a. Comments: Capture first failure logs locally
b. Upload Error Report (checked)
c. Include Internal State (checked)
d. Background Packet Capture (checked)
e. Background Log Capture (checked)
f. Background Memory Trace (checked)
g. Always On Startup (not checked)
h. Always On Shutdown (checked)
i. Report Destination Protocal: raid
j. RAID Volume: raid0
k. RAID Volume Path: error-reports
l. Report History: 10
m. Apply
14. Test error report creation and save to the directory (Administration… Debug… Troubleshooting)
a. Reporting… Generate Error Report
b. Confirm
c. Navigate to Administration… Main… File Management
i. Open folders: local:ondisk:error-reports
ii. Check that a file has been created with the current date and time
15. Enable statistics collection (Administration… Device… Statistics Settings)
a. Enable administrative state (checked)
b. Load interval: 1000
c. Apply
d. Save changes
16. Update to current firmware release
a. Download firmware 7.5.2.? (latest) from IBM Fix Central
b. Non-prod firmware should be idg75212.oradco.scrypt4
c. Prod firmware is idg75212.scrypt4
d. You can apply the Prod firmware to non-prod, but will get a warning message. You will not be able to apply the non-prod firmware to prod, because the license required will be missing.
e. Navigate to Administration… Main… System Control
i. Under Boot Image, click Upload…
ii. Click Browse
iii. Navigate to the folder holding the firmware files, and select the correct firmware file
iv. Click Open
v. Click Upload
vi. Continue
vii. Select “I accept the terms of the license agreements.”
viii. Click Boot Image.
ix. Confirm
17. Configure Network Interfaces (Network… Interface… Ethernet Interface)
a. Select eth0
b. Under Static routes: click Add
c. Destination:  0.0.0.0/0
d. Next –hop router: 10.1.1.1
e. Metric: 255
f. Click Add 		(For NTP Server)
g. Destination:  192.1.1.1/32
h. Next –hop router: 10.1.1.1
i. Metric: 0
j. Apply
k. Click Add 		(For LOGGING SERVER LogStash Server)
l. Destination:  192.1.1.2/32
m. Next –hop router: 10.1.1.1
n. Metric: 0
o. Apply
p. Remove 10.1.1.1 from Default IPv4 gateway
q. Apply
r. Under Secondary IP Addresses, click Add
s. Enter address 10.1.1.1 /29
t. Click Add
u. Enter address 10.1.1.1/29 
v. Apply
w. Save changes
x. Select eth1
y. Primary IP Address: 10.1.1.1/28
z. Under Secondary IP Addresses, click Add
aa. Enter address 10.1.1.1/28
bb. Repeat for 10.1.1.1/28 -> 152.91.28.103/28
cc. Under Static routes: click Add
dd. Destination:  0.0.0.0/0
ee. Next –hop router: 10.1.1.1
ff. Metric: 255
gg. Click Add
hh. Apply
ii. Save changes
jj. Select eth2
kk. Primary IP Address: 10.1.1.1/28
ll. Under Secondary IP Addresses, click Add
mm. Enter address 10.1.1.1/28
nn. Repeat for 10.1.1.1/28 -> 10.1.1.1/28
oo. Under IP Routing
pp. Default IPv4 gateway: 10.1.1.1
qq. Apply
rr. Save changes
18. Configure DNS Settings
a. Enable administrative state: (not checked)
b. Apply
19. Configure NTP Service
a. Under NTP Server, click Add
b. Enter: 10.1.1.1
c. Refresh Interval: 900
d. Apply
e. Save changes
20. Confirm Telnet is disabled (Network… Management… Telnet Service)
a. There should be no services defined
21. Configure  SSH service (Network… Management… SSH Service)
a. Enable administrative state (checked)
b. Local address: 10.1.1.1
c. Port number: 22
d. Access control list: ssh (click the pen icon to edit)
i. Open the triangle beside Entry
ii. Click Add
iii. Access: Allow
iv. Address Range: 10.1.1.1/32
v. Apply
e. Apply
f. Save changes
22. Create custom self-signed certificate for Web Management interfaces
a. Click on ? in top bar and open WebGUI (Crypto Tools in modern interface fails to operate).
b. Administration… Miscellaneous… Crypto Tools
c. Country: AU
d. State: Australian Capital Territory
e. Locality: Canberra
f. Organization: DPDIRECT
g. Organizational Unit: MIT
h. Common Name: DNS-NAME
i. Key Type: RSA
j. RSA key length: 4096
k. Hash Algorithm: sha256
l. File Name: a-name-incl-purpose
m. Validity Period: 3650
n. Password Alias: click +
i. Name: a-name
ii. Enter password twice
iii. Apply
o. Export Private Key: on
p. Generate Self-Signed Certificate: on
q. Export Self-Signed Certificate: on
r. Generate Key and Certificate Objects: on
s. Object Name: a-name
t. Click: Generate Key
u. Confirm
23. Download key and certificate files (Administration… Main… File Management)
a. Open temporary: folder
b. Open and copy content of the files with the a-name-incl-purpose file name stem to your local system for backup
c. Save into escrow storage
24. Configure Web Management Service (Network… Management… Web Management Service)
a. Enable administrative state (checked)
b. Local address: 10.1.1.1
c. Port number: 5550
d. Access control list: a-name (click the pen icon to edit)
i. Open the triangle beside Entry
ii. Click Add
iii. Access: Allow
iv. Address Range: 10.1.1.1/32
v. Apply
e. Save configuration overwrites (checked)
f. Idle timeout: 600
g. Apply
h. Open Advanced
i. Custom SSL server type: Server Profile
j. Custom SSL server profile: click +
i. Name: a-name
ii. Protocols: clear all except TLS version 1.2
iii. Ciphers: Remove all 3DES and SHA ciphers
iv. Identification Credentials: click +
1. Name: : a-name
2. Enable administrative state (checked)
3. Crypto Key: : a-name
4. Certificate: : a-name
5. Apply
k. Apply
l. Reload page to pick up new certificate
m. Save configuration
25. Configure XML Management Service (Network… Management… XML Management Interface)
a. Enable administrative state (checked)
b. Local address: 10.1.1.1
c. Port number: 5550
d. Access control list: : a-name (click the pen icon to edit)
i. Open the triangle beside Entry
ii. Click Add
iii. Access: Allow
iv. Address Range: 10.1.1.1/32
v. Apply
e. Enabled Services (clear WSRR subscription)
f. Open Advanced
g. Custom SSL server type: Server Profile
h. Custom SSL server profile: : a-name
i. Apply
j. Save changes
26. Configure REST Management Service (Network… Management… REST Management Interface)
a. Enable administrative state (checked)
b. Local address: 10.1.1.1
c. Port number: ?
d. Custom SSL server type: Server Profile
e. Custom SSL server profile:  a-name
f. Access control list: a-name2(click the pen icon to edit)
i. Open the triangle beside Entry
ii. Click Add
iii. Access: Allow
iv. Address Range: 10.1.1.1/32
v. Apply
g. Apply
27. Save changes
28. Define Load Balancer group for logging to logging server (Network… Other… Load Balancer Group)
a. Click New…
b. Name: LOGGING SERVER_logger
c. Enable administrative state (checked)
d. Algorithm: Round Robin
e. Try Every Server Before Failing (checked)
f. Masquerade As Group Name (checked)
g. Under Health…
h. Enabled (checked)
i. Health Check Type: TCP Connection
j. TCP Connection Type: Partial
k. Remote Port 8080
l. Timeout: 2
m. Frequency: 180
n. Under Session Affinity…
o. Enable Session Affinity (not checked)
p. Under Members
q. Click Add
i. Actual Host: 10.1.1.1
ii. Weight: 1
iii. Mapped Server Port: 8081
iv. Health Port: 8081
v. Admin State (checked)
r. Click Add
i. Actual Host: 10.1.1.1
ii. Weight: 1
iii. Mapped Server Port: 8082
iv. Health Port: 8081
v. Admin State (checked)
s. Apply
t. Save changes
29. Create LOGGING SERVER Log Target (Administration… Miscellaneous… Manage Log Targets)
a. Click New…
b. Name: LOGGING SERVER_Full_Log
c. Enable administrative state (checked)
d. Comments: Send warnings and above to LogStash (LOGGING SERVER)
e. Target Type: SOAP
f. SOAP Version: SOAP 1.1
g. Log Format: XML
h. Timestamp Format: zulu
i. Rate Limit: 100
j. Feedback Detection (checked)
k. Identical Event Detection (checked)
l. Event Suppression Period: 30
m. Local IP Address: 10.1.1.1
n. URL: http://LOGGING SERVER:8080
o. Open Event Subscriptions
p. Click Add
q. Event Category: all
r. Minimum Event Priority: warning
s. Apply
t. Save changes
30. Upload ORGInterface.xml (Administration… Main… File Management)
a. Actions… Upload Files against the local: directory
b. Browse
c. Find and select ORGInterface.xml
d. Open
e. Upload
31. Set custom user interface (Administration… Device… System Settings)
a. Custom user interface file: local: ORG Interface.xml
b. Apply
c. Save changes
32. Create Application Domains (Administration… Configuration… Application Domain)
a. Click New…
b. Name: DEV
c. File-monitoring of the local: directory
i. Enable auditing (checked)
ii. Enable logging (checked)
d. Open Configuration
e. Configuration checkpoint limit: 5
f. Configuration mode: Local
g. Apply
h. Save changes
i. Repeat for TEST and INT
33. 
